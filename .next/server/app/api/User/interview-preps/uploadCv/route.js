"use strict";(()=>{var e={};e.id=869,e.ids=[869],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},83665:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>v,originalPathname:()=>x,patchFetch:()=>S,requestAsyncStorage:()=>y,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>w});var i={};t.r(i),t.d(i,{PATCH:()=>l,default:()=>c});var s=t(95419),n=t(69108),a=t(99678),o=t(74950),p=t(76520),u=t(19122),d=t.n(u);async function l(e){let r=await e.formData(),t=r.get("id"),i=r.get("resumePDF");try{let e;await (0,p.Z)();let r=await d().findById(t);if(!r)return new Response(JSON.stringify({message:"Not Found"}),{status:404});if(r?.extractedCvText?.parsedText&&!i.type)return new Response(JSON.stringify({message:"..."}),{status:200});if(!i?.arrayBuffer)return new Response(JSON.stringify({message:"No files uploaded."}),{status:400});let s=Buffer.from(await i.arrayBuffer()),n=i.type;if("application/pdf"===n)e=await (0,o.b)(s);else{if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==n&&"application/msword"!==n)return new Response(JSON.stringify({message:"Unsupported file type"}),{status:400});e=await (0,o.i)(s)}return await d().findByIdAndUpdate(t,{$set:{"extractedCvText.parsedText":e,"extractedCvText.fileName":i.name}},{new:!0}),new Response(JSON.stringify({message:"Data updated successfully"}),{status:200})}catch(e){return console.error("Error in PDF handling: ",e),new Response(JSON.stringify({error:e.message}),{status:500})}}let c=l,g=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/User/interview-preps/uploadCv/route",pathname:"/api/User/interview-preps/uploadCv",filename:"route",bundlePath:"app/api/User/interview-preps/uploadCv/route"},resolvedPagePath:"C:\\My Files\\Teneshu\\Talent\\Upwork\\Dev's Resume Finalizing\\Mine\\Dev-s-Resume-main\\app\\api\\User\\interview-preps\\uploadCv\\route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:y,staticGenerationAsyncStorage:m,serverHooks:f,headerHooks:v,staticGenerationBailout:w}=g,x="/api/User/interview-preps/uploadCv/route";function S(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},74950:(e,r,t)=>{t.d(r,{i:()=>o,b:()=>a});let i=require("pdf-parse");var s=t.n(i),n=t(99264);async function a(e){try{return(await s()(e)).text}catch(e){throw console.error("Error parsing PDF: ",e),Error("Failed to parse PDF")}}async function o(e){try{let{value:r}=await n.extractRawText({buffer:e});return r}catch(e){throw console.error("Error parsing DOCX: ",e),Error("Failed to parse DOCX")}}},76520:(e,r,t)=>{t.d(r,{Z:()=>n});var i=t(11185),s=t.n(i);let n=async()=>{try{await s().connect("mongodb+srv://Salahdin:WqN5xnY7Y2gdyWQ4@serverlessinstance0.jzng7nc.mongodb.net/dev's-resume")}catch(e){throw Error("connection failed")}}},19122:(e,r,t)=>{let i=t(11185),{Schema:s}=i,n=new s({user:{type:i.Schema.Types.ObjectId,ref:"User"},firstName:{type:String},lastName:{type:String},jobTitle:{type:String},email:{type:String},linkedin:{type:String},address:{type:String},phone:{type:String},summary:{type:String},jobInfo:{companyName:{type:String},jobDescription:{type:String}},extractedCvText:{parsedText:String,fileName:String},company:{type:String},summary:{type:String},skills:{type:[String],required:!1},behavioralQuestions:{type:[String],required:!1},technicalQuestions:{type:[String],required:!1},projectDescription:{type:[String],required:!1},additionalProject:{type:[String],required:!1},questionsForInterviewers:{type:[String],required:!1}},{timestamps:!0});e.exports=i.models.interviewPrep||i.model("interviewPrep",n)},95419:(e,r,t)=>{e.exports=t(30517)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[1638,9264],()=>t(83665));module.exports=i})();