"use strict";(()=>{var e={};e.id=7858,e.ids=[7858],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},82361:e=>{e.exports=require("events")},57147:e=>{e.exports=require("fs")},22037:e=>{e.exports=require("os")},71017:e=>{e.exports=require("path")},12781:e=>{e.exports=require("stream")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},48944:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>S,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>y,staticGenerationAsyncStorage:()=>c,staticGenerationBailout:()=>f});var i={};r.r(i),r.d(i,{PATCH:()=>d});var a=r(95419),n=r(69108),s=r(99678),o=r(74950),p=r(76520),u=r(39697);async function d(e){let t=await e.formData(),r=t.get("id"),i=t.get("resumePDF");if(!i)return new Response(JSON.stringify({message:"No files uploaded."}),{status:400});try{let e;if(await (0,p.Z)(),!await u.Z.findById(r))return new Response(JSON.stringify({message:"Not Found"}),{status:404});let t=Buffer.from(await i.arrayBuffer()),a=i.type;if("application/pdf"===a)e=await (0,o.b)(t);else{if("application/vnd.openxmlformats-officedocument.wordprocessingml.document"!==a&&"application/msword"!==a)return new Response(JSON.stringify({message:"Unsupported file type"}),{status:400});e=await (0,o.i)(t)}return await u.Z.findByIdAndUpdate(r,{$set:{"optimizeResume.0.extractedCvText.parsedText":e,"optimizeResume.0.extractedCvText.fileName":i.name}},{new:!0}),new Response(JSON.stringify({message:"Data updated successfully"}),{status:200})}catch(e){return console.error("Error in PDF handling: ",e),new Response(JSON.stringify({error:e.message}),{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/User/optimizeResume/route",pathname:"/api/User/optimizeResume",filename:"route",bundlePath:"app/api/User/optimizeResume/route"},resolvedPagePath:"C:\\My Files\\Teneshu\\Talent\\Upwork\\Dev's Resume Finalizing\\Mine\\Dev-s-Resume-main\\app\\api\\User\\optimizeResume\\route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:m,staticGenerationAsyncStorage:c,serverHooks:y,headerHooks:g,staticGenerationBailout:f}=l,S="/api/User/optimizeResume/route";function x(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:c})}},74950:(e,t,r)=>{r.d(t,{i:()=>o,b:()=>s});let i=require("pdf-parse");var a=r.n(i),n=r(99264);async function s(e){try{return(await a()(e)).text}catch(e){throw console.error("Error parsing PDF: ",e),Error("Failed to parse PDF")}}async function o(e){try{let{value:t}=await n.extractRawText({buffer:e});return t}catch(e){throw console.error("Error parsing DOCX: ",e),Error("Failed to parse DOCX")}}},76520:(e,t,r)=>{r.d(t,{Z:()=>n});var i=r(11185),a=r.n(i);let n=async()=>{try{await a().connect("mongodb+srv://Salahdin:WqN5xnY7Y2gdyWQ4@serverlessinstance0.jzng7nc.mongodb.net/dev's-resume")}catch(e){throw Error("connection failed")}}},39697:(e,t,r)=>{r.d(t,{Z:()=>n});let i=r(11185),a=new i.Schema({user:{type:i.Schema.Types.ObjectId,ref:"User",required:!0},firstName:{type:String},lastName:{type:String},jobTitle:{type:String},email:{type:String},linkedin:{type:String},address:{type:String},phone:{type:String},summary:{type:String},isComplete:{type:Boolean,default:!1},isAiGenerate:{type:Boolean,default:!1},templateId:{type:String,default:"Dev Resume 1"},skills:[{label:{type:String,required:!0},selected:{type:Boolean,default:!1}}],education:[{institutionName:{type:String,required:!0},degreeName:{type:String,required:!0},fieldOfStudy:{type:String,required:!0},graduationYear:{type:String,required:!0},currentlyStudying:{type:Boolean}}],experience:[{companyName:{type:String,required:!0},startDate:{type:String,required:!0},endDate:{type:String},currentlyWorking:{type:Boolean,default:!1},jobTitle:{type:String,required:!0},responsibilities:{type:String,required:!0},achievements:{type:String}}],optimizeResume:[{extractedCvText:{parsedText:String,fileName:String},jobDesc:{type:String,required:!0}}]},{timestamps:!0}),n=i.models.Resume||i.model("Resume",a)},95419:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[1638,9264],()=>r(48944));module.exports=i})();