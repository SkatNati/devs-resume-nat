"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7774],{87774:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var a=r(3827),s=r(64090),n=r(7908),o=r(35006),l=r(12393),i=r(64095),d=r(98010);let c=(e,t)=>{var r;let{type:a}=t,[c,u]=(0,s.useState)(0),[p,h]=(0,s.useState)(null),[f,m]=(0,s.useState)(!1),{incrementSteps:v}=(0,o.w)(a),{currentCv:x}=(0,l.Z)(a),g=(0,i.NL)(),{toast:b}=(0,d.pm)(),{fileName:y,parsedText:w}=null!==(r=null==x?void 0:x.message.extractedCvText)&&void 0!==r?r:{};(0,s.useEffect)(()=>{w&&y&&h(!0)},[x]);let j=async e=>{let t=setInterval(()=>{u(e=>e>=100?(clearInterval(t),100):e+10)},200);h(e)},N=async()=>{m(!0);try{let t=new FormData;t.append("resumePDF",p),t.append("id",e),"CoverLetter"==a?await n.Z.patch("/api/User/CoverLetter/uploadCv",t):"interviewPreps"==a&&await n.Z.patch("/api/User/interview-preps/uploadCv",t),g.invalidateQueries(["useGetCurrentUserResume",e]),v()}catch(e){var t,r;b({title:"Error",description:null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message,variant:"destructive",className:"rounded-xl"}),console.error("Error uploading file:",e)}finally{m(!1)}};return{handleUpload:j,uploadProgress:c,selectedFile:p,setSelectedFile:h,handleSubmitCvToExtract:N,isLoading:f,fileName:y,parsedText:w,handleFileChange:e=>{let t=e.target.files[0];t&&j(t)},handleDrop:e=>{e.preventDefault();let t=e.dataTransfer.files[0];t&&j(t)}}};var u=r(2641),p=r(79430),h=r(81659),f=e=>{let{uploadProgress:t,selectedFile:r,setSelectedFile:s,handleSubmitCvToExtract:n,isLoading:o,fileName:l,parsedText:i,handleFileChange:d,handleDrop:f}=c((0,p.Q)("id"),e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-white  rounded-lg max-w-md w-full",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-6",children:"Upload Resume"}),(0,a.jsxs)("div",{className:"flex flex-col items-center border-2 border-dashed border-gray-300 rounded-lg p-10 mb-4",onDragOver:e=>e.preventDefault(),onDrop:f,children:[(0,a.jsx)("p",{className:"text-lg font-medium mb-2",children:"Choose a file or drag & drop it here"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"PDF or Word format, up to 50MB"}),(0,a.jsx)("input",{type:"file",accept:"application/pdf, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/msword",onChange:d,style:{display:"none"},id:"file-upload"}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"border border-[#F9E547] text-[#F9E547] font-bold py-2 px-4 rounded cursor-pointer",children:"Browse File"})]}),(0,a.jsx)(h.Z,{setSelectedFile:s,selectedFile:r,fileName:l,uploadProgress:t,parsedText:i})]}),(0,a.jsx)("div",{onClick:n,children:(0,a.jsx)(u.Z,{disabled:o,text:o?"loading..":"Next"})})]})}},2641:function(e,t,r){var a=r(3827),s=r(84590);r(64090),t.Z=e=>{let{text:t,type:r,className:n,disabled:o=!1}=e;return(0,a.jsx)("div",{className:"flex justify-end ".concat(n),children:(0,a.jsx)(s.Button,{disabled:o,type:r,className:"bg-[#F9E547] buttonShadow text-black hover:bg-yellow-600  font-bold py-2 px-4 rounded-r",children:t})})}},84590:function(e,t,r){r.r(t),r.d(t,{Button:function(){return u},ButtonIcon:function(){return p},buttonVariants:function(){return c}});var a=r(3827),s=r(64090),n=r(62177),o=r(59143),l=r(81615),i=r(57742),d=r(84353);let c=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 dark:ring-offset-slate-950 dark:focus-visible:ring-slate-300",{defaultVariants:{size:"default",variant:"default"},variants:{size:{auth:"h-11 w-full font-semibold text-base",default:"h-12 px-4 py-2 text-base",icon:"h-10 w-10",lg:"h-12 lg:h-[3.75rem] rounded-md px-7  text-lg",sm:"h-9 rounded-md px-3"},variant:{default:"bg-primaryx text-slate-50 hover:bg-primaryx-500/90 dark:bg-primaryx dark:text-slate-900 dark:hover:bg-primaryx-800",destructive:"bg-red-500 text-slate-50 hover:bg-red-500/90 dark:bg-red-900 dark:text-slate-50 dark:hover:bg-red-900/90",ghost:"hover:bg-slate-100 hover:text-slate-900 dark:hover:bg-slate-800 dark:hover:text-slate-50 text-primaryx-500",link:"text-slate-900 underline-offset-4 hover:underline dark:text-slate-50",outline:"border border-gray-300 bg-white hover:bg-gray-100 text-gray-700 hover:text-slate-900 dark:border-slate-800 dark:bg-slate-950 dark:hover:bg-slate-800 dark:hover:text-slate-50",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-100/80 dark:bg-slate-800 dark:text-slate-50 dark:hover:bg-slate-800/80"}}}),u=s.forwardRef((e,t)=>{let{className:r,variant:s,size:n,asChild:i=!1,hasAnimaion:u=!1,...p}=e,h=i?o.g7:"button";return u?(0,a.jsx)(l.E.div,{className:"w-full ",whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,a.jsx)(h,{className:(0,d.cn)(c({className:r,size:n,variant:s})),ref:t,...p})}):(0,a.jsx)(h,{className:(0,d.cn)(c({className:r,size:n,variant:s})),ref:t,...p})});u.displayName="Button";let p=e=>{let{id:t}=e;return(0,a.jsx)(u,{id:t,variant:"outline",className:"h-7 w-7 rounded-full border-primaryx text-primaryx",size:"icon",children:(0,a.jsx)(n.XCv,{className:"h-4 w-4 text-sm"})})};p.displayName="ButtonIcon"},98010:function(e,t,r){r.d(t,{pm:function(){return p}});var a=r(64090);let s=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?o(r):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=l(d,e),i.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function p(){let[e,t]=a.useState(d);return a.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},81659:function(e,t,r){var a=r(3827);r(64090),t.Z=e=>{let{fileName:t,uploadProgress:r,parsedText:s,selectedFile:n}=e;if(!n)return null;let o=n.name||t,l=null==o?void 0:o.split(".").pop().toLowerCase(),i="doc"===l||"docx"===l,d="/assets/Group 6.png";return i&&(d="/assets/word.png"),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex justify-between bg-gray-100 p-4 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("img",{alt:"pdf"===l?"PDF icon":"Word icon",className:"mr-2",height:"32",src:d,width:"32"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:n.name||t}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:[r<100&&!s&&"Uploading",100===r&&s&&"Uploaded"]})]})]})}),n&&(0,a.jsx)("div",{className:"w-full ".concat(i?"bg-blue-100":"bg-yellow-100"," rounded-full h-1.5 mt-3"),children:(0,a.jsx)("div",{className:"".concat(i?"bg-blue-600":"bg-[#f9e547]"," h-1.5 rounded-full"),style:{width:"".concat(r,"%")}})})]})}},85033:function(e,t,r){r.d(t,{Z:function(){return l}});var a=r(34870);let s=async(e,t)=>{let r=(0,a.ej)("token");return t={...t,headers:{...r?{Authorization:"Bearer ".concat(r)}:{Authorization:""},"Content-Type":"application/json",...t&&t.headers}},await fetch("".concat("http://localhost:3000").concat(e),t)};var n=r(32215);class o{static get token(){return(0,a.ej)("token")}static handleError(e){return e instanceof Error?Promise.reject(JSON.parse(e.message)):Promise.reject(e)}static async handleResponse(e){if(e.ok)return Promise.resolve(await e.json());throw Error(await e.text())}static async get(e){let{endpoint:t}=e;try{let e=await s(t,{method:"GET"});return o.handleResponse(e)}catch(e){return o.handleError(e)}}static async post(e){let{endpoint:t,body:r}=e;try{let e=await s(t,{body:JSON.stringify(r),method:"POST"});return o.handleResponse(e)}catch(e){return e}}static async put(e){let{endpoint:t,body:r}=e;try{let e=await s(t,{body:JSON.stringify(r),method:"PUT"});return o.handleResponse(e)}catch(e){return e}}static async patch(e){let{endpoint:t,body:r,config:a}=e;try{let e=await s(t,{body:JSON.stringify(r),method:"PATCH",...a});return o.handleResponse(e)}catch(e){return o.handleError(e)}}static async patchMultipart(e){let{endpoint:t,body:r}=e;try{let e=await fetch("".concat(n.env.NEXT_PUBLIC_BASE_URL).concat(t),{body:r,headers:{Authorization:"Bearer ".concat(o.token)},method:"PATCH"});return o.handleResponse(e)}catch(e){return o.handleError(e)}}static async delete(e){let{endpoint:t,body:r}=e;try{let e=await s(t,{body:JSON.stringify(r),method:"DELETE"});return o.handleResponse(e)}catch(e){return o.handleError(e)}}}var l=o},12393:function(e,t,r){r.d(t,{Z:function(){return l}});var a=r(78643),s=r(85033);let n=async e=>{let t,{cvId:r,type:a}=e,n="/api/User/";return t="CoverLetter"===a?"".concat(n,"CoverLetter/getAllCoverLetter/").concat(r):"interviewPreps"===a?"".concat(n,"interview-preps/").concat(r):"".concat(n,"Cv/getAllUserCv/").concat(r),await s.Z.get({endpoint:t})};var o=r(79430),l=e=>{let t=(0,o.Q)("id"),{data:r,isError:s,isLoading:l}=(0,a.a)(["useGetCurrentUserResume",t],()=>n({cvId:t,type:e}),{enabled:!!t});return{currentCv:r,isLoading:l,isError:s}}}}]);